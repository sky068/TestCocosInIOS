{"version":3,"sources":["assets/Script/Blank.ts","assets/Script/Helloworld.ts"],"names":["_a","cc","_decorator","ccclass","property","NewClass","_super","__extends","prototype","start","assetManager","releaseAll","sys","isNative","director","once","Director","EVENT_AFTER_DRAW","id","game","_persistRootNodes","removePersistRootNode","getScene","destroy","Object","_deferredDestroy","audioEngine","uncacheAll","pause","garbageCollect","ret","jsb","reflection","callStaticMethod","__decorate","Component","exports","default","Helloworld","_this","apply","this","arguments","label","text","setFrameRate","debug","setDisplayStats","_loop_1","i","node","Node","parent","this_1","sp","addComponent","Sprite","file","resources","load","SpriteFrame","err","spf","log","spriteFrame","on","EVENT_HIDE","EVENT_SHOW","back2App","loadScene","Label"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAWM,IAAAA,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAAC,WAAA,SAAAC;MAAsCC,UAAAF,UAAAC;MAAtC,SAAAD;;;MAMIA,SAAAG,UAAAC,QAAA;QAEIR,GAAAS,aAAAC;QAEAV,GAAAW,IAAAC,YAEIZ,GAAAa,SAAAC,KAAAd,GAAAe,SAAAC,kBAAA;UACI,KAAA,IAAAC,MAAAjB,GAAAkB,KAAAC,mBACInB,GAAAkB,KAAAE,sBAAApB,GAAAkB,KAAAC,kBAAAF;UAIJjB,GAAAa,SAAAQ,WAAAC;UACAtB,GAAAuB,OAAAC;UAGAxB,GAAAyB,eACIzB,GAAAyB,YAAAC;UAGJ1B,GAAAkB,KAAAS;UAEA3B,GAAAW,IAAAiB;UAEA,IAAAC,MAAAC,IAAAC,WAAAC,iBAAA,YAAA;;;MA9BK5B,WAAA6B,aADpB/B,WACoBE;MAqCrB,OAAAA;KArCA,CAAAJ,GAAAkC;IAAqBC,QAAAC,UAAAhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICdf,IAAAL,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAAkC,aAAA,SAAAhC;MAAwCC,UAAA+B,YAAAhC;MAAxC,SAAAgC;QAAA,IAAAC,QAAA,SAAAjC,UAAAA,OAAAkC,MAAAC,MAAAC,cAAAD;QAGIF,MAAAI,QAAA;QAGAJ,MAAAK,OAAA;;;MAEAN,WAAA9B,UAAAC,QAAA;QACIR,GAAAkB,KAAA0B,aAAA;QACA5C,GAAA6C,MAAAC,gBAAA;QAGS,IAAAC,UAAA,SAAAC;UACL,IAAAC,OAAA,IAAAjD,GAAAkD;UACAD,KAAAE,SAAAC,OAAAH;UACA,IAAAI,KAAAJ,KAAAK,aAAAtD,GAAAuD;UACA,IAAAC,OAAA,mBAAAR;UACAhD,GAAAyD,UAAAC,KAAAF,MAAAxD,GAAA2D,aAAA,SAAAC,KAAAC;YACI,IAAAD,KAAA;cACI5D,GAAA8D,IAAAF;cACA;;YAEJP,GAAAU,cAAAF;;;;QAVR,KAAA,IAAAb,IAAA,GAAAA,IAAA,IAAAA,KAASD,QAAAC;QAcThD,GAAAkB,KAAA8C,GAAAhE,GAAAkB,KAAA+C,YAAA;UACIjE,GAAA8D,IAAA;WACJtB;QAEAxC,GAAAkB,KAAA8C,GAAAhE,GAAAkB,KAAAgD,YAAA;UACIlE,GAAA8D,IAAA;WACJtB;;MAGJH,WAAA9B,UAAA4D,WAAA;QACInE,GAAA8D,IAAA;QACA9D,GAAAa,SAAAuD,UAAA;;MAnCJnC,aADC9B,SAAAH,GAAAqE,UACsBhC,WAAA9B,WAAA,cAAA;MAGvB0B,aADC9B,YACsBkC,WAAA9B,WAAA,aAAA;MANN8B,aAAAJ,aADpB/B,WACoBmC;MAwCrB,OAAAA;KAxCA,CAAArC,GAAAkC;IAAqBC,QAAAC,UAAAC","sourcesContent":["/*\n * @Author: xujiawei \n * @Date: 2020-09-18 16:41:12 \n * @Last Modified by: xujiawei\n * @Last Modified time: 2020-09-21 11:20:32\n * \n * 空白场景，用来释放资源\n * 从游戏场景退回到iOS原生app时跳转到这个场景释放资源并停止游戏主循环\n */\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start() {\n        // 这是个空场景，可以直接释放所有资源\n        cc.assetManager.releaseAll();\n\n        if (cc.sys.isNative) {\n            \n            cc.director.once(cc.Director.EVENT_AFTER_DRAW, function () {\n                for (var id in cc.game._persistRootNodes) {\n                    cc.game.removePersistRootNode(cc.game._persistRootNodes[id]);\n                }\n    \n                // Clear scene\n                cc.director.getScene().destroy();\n                cc.Object._deferredDestroy();\n    \n                // Clean up audio\n                if (cc.audioEngine) {\n                    cc.audioEngine.uncacheAll();\n                }\n                    \n                cc.game.pause();\n               \n                cc.sys.garbageCollect();\n    \n                let ret = jsb.reflection.callStaticMethod(\"CocosMng\", \"exitCocosForJS\"); \n                \n            });\n        }\n    }\n\n    // update (dt) {}\n}\n","const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Helloworld extends cc.Component {\n\n    @property(cc.Label)\n    label: cc.Label = null;\n\n    @property\n    text: string = 'hello';\n\n    start () {\n        cc.game.setFrameRate(30);\n        cc.debug.setDisplayStats(true);\n\n        // init logic\n        for (let i = 1; i<78; i++) {\n            let node = new cc.Node();\n            node.parent = this.node;\n            let sp: cc.Sprite = node.addComponent(cc.Sprite);\n            let file = \"buildings/test\" + i;\n            cc.resources.load(file, cc.SpriteFrame, (err, spf: cc.SpriteFrame)=>{\n                if (err) {\n                    cc.log(err);\n                    return;\n                }\n                sp.spriteFrame = spf;\n            });\n        }\n\n        cc.game.on(cc.game.EVENT_HIDE, ()=>{\n            cc.log('-----game hide');\n        }, this);\n\n        cc.game.on(cc.game.EVENT_SHOW, ()=>{\n            cc.log('-----game show');\n        }, this);\n    }\n\n    back2App() {\n        cc.log('返回app');\n        cc.director.loadScene(\"blank\");\n    }\n}\n"],"file":"index.js"}