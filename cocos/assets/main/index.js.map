{"version":3,"sources":["assets/Script/Blank.ts","assets/Script/Helloworld.ts"],"names":["_a","cc","_decorator","ccclass","property","NewClass","_super","__extends","prototype","start","assetManager","releaseAll","game","pause","sys","isNative","setTimeout","director","getScene","destroy","Object","_deferredDestroy","audioEngine","uncacheAll","garbageCollect","ret","jsb","reflection","callStaticMethod","__decorate","Component","exports","default","Helloworld","_this","apply","this","arguments","label","text","setFrameRate","debug","setDisplayStats","_loop_1","i","node","Node","parent","this_1","sp","addComponent","Sprite","file","resources","load","SpriteFrame","err","spf","log","spriteFrame","back2App","loadScene","Label"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAWM,IAAAA,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAAC,WAAA,SAAAC;MAAsCC,UAAAF,UAAAC;MAAtC,SAAAD;;;MAMIA,SAAAG,UAAAC,QAAA;QACIR,GAAAS,aAAAC;QACAV,GAAAW,KAAAC;QAEAZ,GAAAa,IAAAC,YAEIC,WAAA;UACIf,GAAAgB,SAAAC,WAAAC;UACAlB,GAAAmB,OAAAC;UAGApB,GAAAqB,eACIrB,GAAAqB,YAAAC;UAGJtB,GAAAa,IAAAU;UAEA,IAAAC,MAAAC,IAAAC,WAAAC,iBAAA,YAAA;WACJ;;MAxBSvB,WAAAwB,aADpB1B,WACoBE;MA6BrB,OAAAA;KA7BA,CAAAJ,GAAA6B;IAAqBC,QAAAC,UAAA3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICdf,IAAAL,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAA6B,aAAA,SAAA3B;MAAwCC,UAAA0B,YAAA3B;MAAxC,SAAA2B;QAAA,IAAAC,QAAA,SAAA5B,UAAAA,OAAA6B,MAAAC,MAAAC,cAAAD;QAGIF,MAAAI,QAAA;QAGAJ,MAAAK,OAAA;;;MAEAN,WAAAzB,UAAAC,QAAA;QACIR,GAAAW,KAAA4B,aAAA;QACAvC,GAAAwC,MAAAC,gBAAA;QAGS,IAAAC,UAAA,SAAAC;UACL,IAAAC,OAAA,IAAA5C,GAAA6C;UACAD,KAAAE,SAAAC,OAAAH;UACA,IAAAI,KAAAJ,KAAAK,aAAAjD,GAAAkD;UACA,IAAAC,OAAA,mBAAAR;UACA3C,GAAAoD,UAAAC,KAAAF,MAAAnD,GAAAsD,aAAA,SAAAC,KAAAC;YACI,IAAAD,KAAA;cACIvD,GAAAyD,IAAAF;cACA;;YAEJP,GAAAU,cAAAF;;;;QAVR,KAAA,IAAAb,IAAA,GAAAA,IAAA,IAAAA,KAASD,QAAAC;;MAebX,WAAAzB,UAAAoD,WAAA;QACI3D,GAAAyD,IAAA;QAQAzD,GAAAgB,SAAA4C,UAAA;;MAlCJhC,aADCzB,SAAAH,GAAA6D,UACsB7B,WAAAzB,WAAA,cAAA;MAGvBqB,aADCzB,YACsB6B,WAAAzB,WAAA,aAAA;MANNyB,aAAAJ,aADpB1B,WACoB8B;MAuCrB,OAAAA;KAvCA,CAAAhC,GAAA6B;IAAqBC,QAAAC,UAAAC","sourcesContent":["/*\n * @Author: xujiawei \n * @Date: 2020-09-18 16:41:12 \n * @Last Modified by: xujiawei\n * @Last Modified time: 2020-09-18 16:42:56\n * \n * 空白场景，用来释放资源\n * 从游戏场景退回到iOS原生app时跳转到这个场景然后停止游戏主循环\n */\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start() {\n        cc.assetManager.releaseAll();\n        cc.game.pause();\n\n        if (cc.sys.isNative) {\n            // 这里不要用schedule，因为销毁本场景时会报错，延迟一帧gc才能及时生效\n            setTimeout(() => {\n                cc.director.getScene().destroy();\n                cc.Object._deferredDestroy();\n        \n                // Clean up audio\n                if (cc.audioEngine) {\n                    cc.audioEngine.uncacheAll();\n                }\n        \n                cc.sys.garbageCollect();\n    \n                let ret = jsb.reflection.callStaticMethod(\"CocosMng\", \"exitCocosForJS\"); \n            }, 50);\n        }\n    }\n\n    // update (dt) {}\n}\n","const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Helloworld extends cc.Component {\n\n    @property(cc.Label)\n    label: cc.Label = null;\n\n    @property\n    text: string = 'hello';\n\n    start () {\n        cc.game.setFrameRate(30);\n        cc.debug.setDisplayStats(true);\n\n        // init logic\n        for (let i = 1; i<78; i++) {\n            let node = new cc.Node();\n            node.parent = this.node;\n            let sp: cc.Sprite = node.addComponent(cc.Sprite);\n            let file = \"buildings/test\" + i;\n            cc.resources.load(file, cc.SpriteFrame, (err, spf: cc.SpriteFrame)=>{\n                if (err) {\n                    cc.log(err);\n                    return;\n                }\n                sp.spriteFrame = spf;\n            });\n        }\n    }\n\n    back2App() {\n        cc.log('返回app');\n        // if (cc.sys.isNative) {\n        //     cc.log('native 退出cocos');\n        //     cc.loader.releaseAll();\n        //     cc.sys.garbageCollect();\n        //     let ret = jsb.reflection.callStaticMethod(\"CocosMng\", \"exitCocosForJS\");\n        // }\n\n        cc.director.loadScene(\"blank\");\n    }\n}\n"],"file":"index.js"}